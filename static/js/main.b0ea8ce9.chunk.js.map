{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","contexts/CardContext.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ConfirmDeletePopup.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddPlacePopup.js","components/ImagePopup.js","utils/Api.js","components/App.js","index.js"],"names":["Header","className","href","target","src","logo","alt","CurrentUserContext","React","createContext","Card","name","link","likes","handleCardClick","card","onCardLike","onConfirmeDelete","currentUser","useContext","isOwn","owner","_id","isLiked","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","type","onClick","style","backgroundImage","role","aria-label","length","CardContext","Main","onEditProfile","onAddPlace","onEditAvatar","onCardClick","handleCardLike","handleCardDelete","currentCards","avatar","about","map","item","onCardDelete","handleConfirmeDelete","Footer","PopupWithForm","title","buttonText","children","isOpen","onClose","handleSubmit","e","classList","contains","noValidate","onSubmit","ConfirmDeletePopup","id","preventDefault","EditAvatarPopup","onUpdateAvatar","inputEl","useRef","current","value","placeholder","ref","required","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","minLength","maxLength","onChange","AddPlacePopup","setLink","ImagePopup","element","api","url","headers","this","_url","_token","_userUrl","_cardsUrl","_likesUrl","res","ok","json","Promise","reject","status","fetch","authorization","then","_checkResponse","method","body","JSON","stringify","cardId","isNotLiked","App","setCurrentUser","setCurrentCards","isEditProfilePopupOpen","setEditProfilePopupOpen","isAddPlacePopupOpen","setAddPlacePopupOpen","isEditAvatarPopupOpen","setEditAvatarPopupOpen","isConfirmDeletePopupOpen","setConfirmDeletePopupOpen","selectedCard","setSelectedCard","getUserData","data","console","log","catch","err","getInitialCards","deleteCard","state","filter","c","closeAllPopups","Provider","changeLikeCardStatus","newCard","saveUserChanges","changedAvatar","postNewCard","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b0ea8ce9.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import logo from '../images/logo.svg'\r\n\r\nconst Header = () => {\r\n  return (\r\n    <header className=\"header content content_place_header\">\r\n      <a className=\"page-link\" href=\"#\" target=\"_parent\">\r\n        <img className=\"logo\" src={logo} alt=\"логотип\" />\r\n      </a>\r\n    </header>\r\n  );\r\n};\r\n\r\nexport default Header","import React from 'react'\r\n\r\nexport const CurrentUserContext = React.createContext()","import { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport React, { useContext } from 'react'\r\n\r\nconst Card = ({name, link, likes, handleCardClick, card, onCardLike, onConfirmeDelete}) => {\r\n  const currentUser = useContext(CurrentUserContext)\r\n  const onCardClick = () => {\r\n    handleCardClick(card)\r\n  }\r\n  const handleLikeClick = () => {\r\n    onCardLike(card)\r\n  }\r\n\r\n  const handleTrashClick = () => {\r\n    onConfirmeDelete(card)\r\n  }\r\n  const isOwn = card.owner._id === currentUser._id;\r\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\r\n  const cardDeleteButtonClassName = (\r\n    `element__trash ${isOwn ? null : 'element__trash_hidden'} page-link`\r\n  ); \r\n  const cardLikeButtonClassName = (\r\n    `element__button ${isLiked ? 'element__button_active' : null} page-link`\r\n  )\r\n\r\n  return (\r\n    <article className=\"element\">\r\n      <button className={cardDeleteButtonClassName} type=\"button\" onClick={handleTrashClick}></button>\r\n      <div className=\"element__img\" style={{backgroundImage: `url(${link})`}} role=\"img\" aria-label={name} onClick={onCardClick}></div>\r\n      <div className=\"element__items\">\r\n        <h3 className=\"element__title\">{name}</h3>\r\n        <div className=\"element__container\">\r\n          <button className={cardLikeButtonClassName} onClick={handleLikeClick} type=\"button\"></button>\r\n          <span className=\"element__counter\">{likes.length}</span>\r\n        </div>\r\n      </div>\r\n    </article>\r\n  );\r\n};\r\n\r\nexport default Card;\r\n","import React from 'react'\r\n\r\nexport const CardContext = React.createContext()","import React, { useContext } from \"react\";\r\nimport Card from \"./Card\";\r\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\r\nimport { CardContext } from \"../contexts/CardContext\";\r\n\r\nconst Main = ({ onEditProfile, onAddPlace, onEditAvatar, onCardClick, handleCardLike, handleCardDelete, onConfirmeDelete }) => {\r\n  const currentUser = useContext(CurrentUserContext);\r\n  const currentCards = useContext(CardContext);\r\n\r\n  return (\r\n    <main className=\"main\">\r\n      <section className=\"profile content content_place_profile\">\r\n        <div className=\"profile__content\">\r\n          <div className=\"profile__avatar-container\">\r\n            <img\r\n              src={currentUser.avatar}\r\n              alt=\"Аватар профиля\"\r\n              className=\"profile__avatar\"\r\n            />\r\n            <button\r\n              className=\"profile__avatar-button\"\r\n              onClick={onEditAvatar}\r\n            ></button>\r\n          </div>\r\n          <div className=\"profile__info\">\r\n            <div className=\"profile__text\">\r\n              <h1 className=\"profile__title\">{currentUser.name}</h1>\r\n              <button\r\n                className=\"profile__edit-button page-link\"\r\n                type=\"button\"\r\n                onClick={onEditProfile}\r\n              ></button>\r\n            </div>\r\n            <p className=\"profile__subtitle\">{currentUser.about}</p>\r\n          </div>\r\n        </div>\r\n        <button\r\n          className=\"profile__add-button page-link\"\r\n          type=\"button\"\r\n          onClick={onAddPlace}\r\n        ></button>\r\n      </section>\r\n\r\n      <section className=\"elements content content_place_elements\">\r\n        {currentCards.map((item) => {\r\n          return (\r\n            <Card\r\n              key={item._id}\r\n              {...item}\r\n              card={item}\r\n              handleCardClick={onCardClick}\r\n              onCardLike={handleCardLike}\r\n              onCardDelete={handleCardDelete}\r\n              onConfirmeDelete={onConfirmeDelete}\r\n              handleConfirmeDelete={onConfirmeDelete}\r\n            />\r\n          );\r\n        })}\r\n      </section>\r\n    </main>\r\n  );\r\n};\r\n\r\nexport default Main;\r\n","const Footer = () => {\r\n  return (\r\n    <footer className=\"footer content\">\r\n      <p className=\"footer__text\">&copy; 2020 Mesto Russia</p>\r\n    </footer>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","const PopupWithForm = ({title, name, buttonText, children, isOpen, onClose, handleSubmit}) => {\r\n \r\n  const handleClose = e => {\r\n    if (e.target.classList.contains(\"popup\")) onClose()\r\n  }\r\n\r\n  return (\r\n    <div className={`popup popup_${name} ${isOpen ? 'popup_visiable' : false}`} onClick={handleClose}>\r\n      <div className={`popup__content popup__content_${name}`}>\r\n        <button className={`popup__close popup__close_${name} page-link`} type=\"button\" onClick={onClose}></button>\r\n        <h3 className={`popup__title popup__title_${name}`}>{title}</h3>\r\n        <form\r\n          className={`popup__form popup__form_${name}`}\r\n          name={`popup-${name}`}\r\n          noValidate\r\n          onSubmit={handleSubmit}\r\n        >\r\n          {children}\r\n          <button className={`popup__button popup__button_${name}`} type=\"submit\">\r\n            {buttonText}\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PopupWithForm;\r\n","import React from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst ConfirmDeletePopup = ({ isOpen:{ isOpen, card },  onClose, onCardDelete }) => {\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    onCardDelete(card)\r\n  }\r\n  return (\r\n    <PopupWithForm\r\n      id=\"confirm\"\r\n      title=\"Вы уверены?\"\r\n      name=\"confirm\"\r\n      buttonText=\"Да\"\r\n      onClose={onClose}\r\n      isOpen={isOpen}\r\n      handleSubmit={handleSubmit}\r\n    ></PopupWithForm>\r\n  );\r\n};\r\nexport default ConfirmDeletePopup","import { useState, useRef } from \"react\";\r\nimport PopupWithForm from \"./PopupWithForm\";\r\n\r\nconst EditAvatarPopup = ({ isOpen, onClose, onUpdateAvatar }) => {\r\n\r\n  const inputEl = useRef()\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    onUpdateAvatar(inputEl.current.value);\r\n  } \r\n\r\n\r\n  return (\r\n    <PopupWithForm\r\n      id=\"change\"\r\n      title=\"Обновить аватар\"\r\n      name=\"change\"\r\n      buttonText=\"Сохранить\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      handleSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__label popup__label_change\">\r\n        <input\r\n          type=\"url\"\r\n          className=\"popup__input popup__input_change\"\r\n          id=\"input-change\"\r\n          name=\"Url\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          ref={inputEl}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-change-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditAvatarPopup;\r\n","import PopupWithForm from \"./PopupWithForm\";\r\nimport { useState, useContext, useEffect } from 'react'\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext'\r\n\r\nconst EditProfilePopup = ({ isOpen, onClose, onUpdateUser }) => {\r\n  const [name, setName] = useState('')\r\n  const [description , setDescription ] = useState('')\r\n  const currentUser = useContext(CurrentUserContext);\r\n\r\n  const handleNameChange = e => {\r\n    setName(e.target.value)\r\n  }\r\n  const handleDescriptionChange = e => {\r\n    setDescription(e.target.value)\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n\r\n    onUpdateUser({\r\n      name: name,\r\n      about: description,\r\n    });\r\n  } \r\n\r\n  useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      id=\"edit\"\r\n      title=\"Редактировать профиль\"\r\n      name=\"edit\"\r\n      buttonText=\"Сохранить\"\r\n      handleSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__label\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"popup__input popup__input_place_title\"\r\n          id=\"input-title\"\r\n          name=\"Name\"\r\n          minLength=\"2\"\r\n          maxLength=\"40\"\r\n          onChange={handleNameChange}\r\n          value={name || ''}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-title-error\"></span>\r\n      </label>\r\n      <label className=\"popup__label\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"popup__input popup__input_place_subtitle\"\r\n          id=\"input-subtitle\"\r\n          name=\"Profession\"\r\n          minLength=\"2\"\r\n          maxLength=\"200\"\r\n          value={description || ''}\r\n          onChange={handleDescriptionChange}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-subtitle-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default EditProfilePopup;\r\n","import {useState} from \"react\";\r\nimport PopupWithForm from './PopupWithForm'\r\n\r\nconst AddPlacePopup = ({ onClose, isOpen, onAddPlace }) => {\r\n\r\n  const [name, setName] = useState('')\r\n  const [link, setLink] = useState('')\r\n\r\n  const handleSubmit = e => {\r\n    e.preventDefault()\r\n    onAddPlace({\r\n      name: name,\r\n      link: link\r\n    })\r\n  }\r\n\r\n  const handleNameChange = e => {\r\n    setName(e.target.value)\r\n  }\r\n\r\n  const handleLinkChange = e => {\r\n    setLink(e.target.value)\r\n  }\r\n\r\n  return (\r\n    <PopupWithForm\r\n      id=\"add\"\r\n      title=\"Новое место\"\r\n      name=\"add\"\r\n      buttonText=\"Создать\"\r\n      isOpen={isOpen}\r\n      onClose={onClose}\r\n      handleSubmit={handleSubmit}\r\n    >\r\n      <label className=\"popup__label popup__label_add\">\r\n        <input\r\n          type=\"text\"\r\n          className=\"popup__input popup__input_add_name\"\r\n          id=\"input-name\"\r\n          name=\"Name\"\r\n          placeholder=\"Название\"\r\n          minLength=\"2\"\r\n          maxLength=\"30\"\r\n          onChange={handleNameChange}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-name-error\"></span>\r\n      </label>\r\n      <label className=\"popup__label popup__label_add\">\r\n        <input\r\n          type=\"url\"\r\n          className=\"popup__input popup__input_add_src\"\r\n          id=\"input-url\"\r\n          name=\"Url\"\r\n          placeholder=\"Ссылка на картинку\"\r\n          onChange={handleLinkChange}\r\n          required\r\n        />\r\n        <span className=\"popup__error\" id=\"input-url-error\"></span>\r\n      </label>\r\n    </PopupWithForm>\r\n  );\r\n};\r\n\r\nexport default AddPlacePopup;\r\n","const ImagePopup = ({onClose, card}) => {\r\n\r\n  const handleClose = e => {\r\n    if (e.target.classList.contains(\"popup\")) onClose()\r\n  }\r\n\r\n  return (\r\n    <div className={`popup popup_img ${card.isOpen ? 'popup_visiable' : null}`} onClick={handleClose}> \r\n      <div className=\"popup__container\">\r\n        <div className=\"popup__img-container\">\r\n          <img\r\n            src={card.element.link}\r\n            alt={card.element.name}\r\n            className=\"popup__img\"\r\n          />\r\n        </div>\r\n        <p className=\"popup__text\">{card.element.name}</p>\r\n        <button className=\"popup__close popup__close_img page-link\" onClick={onClose}></button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ImagePopup;\r\n","class Api {\r\n  constructor({ url, headers }) {\r\n    this._url = url;\r\n    this._token = headers\r\n    this._userUrl = `${this._url}/users/me`\r\n    this._cardsUrl = `${this._url}/cards`\r\n    this._likesUrl = `${this._url}/cards/likes`;\r\n  }\r\n\r\n  _checkResponse(res) {\r\n    if (res.ok) {\r\n        return res.json();\r\n    }\r\n    return Promise.reject(`Ошибка ${res.status}`);\r\n}\r\n\r\n  getUserData() {\r\n    return fetch(this._userUrl, {\r\n      headers: {\r\n        authorization: this._token,\r\n      },\r\n    })\r\n      .then(this._checkResponse)\r\n  } \r\n\r\n  getInitialCards() {\r\n    return fetch(this._cardsUrl, {\r\n        headers: {\r\n          authorization: this._token,\r\n        }\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  saveUserChanges({\r\n    name,\r\n    about\r\n  }) {\r\n    return fetch(this._userUrl, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          about: about,\r\n        })\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  changedAvatar(src) {\r\n    return fetch(`${this._userUrl}/avatar`, {\r\n        method: 'PATCH',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          avatar: src\r\n        })\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n  \r\n  postNewCard({\r\n    name,\r\n    link\r\n  }) {\r\n    return fetch(this._cardsUrl, {\r\n        method: 'POST',\r\n        headers: {\r\n          authorization: this._token,\r\n          'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n          name: name,\r\n          link: link,\r\n        })\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  deleteCard(cardId) {\r\n    return fetch(`${this._cardsUrl}/${cardId}`, {\r\n        method: 'DELETE',\r\n        headers: {\r\n          authorization: this._token,\r\n        }\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n  changeLikeCardStatus(cardId, isNotLiked){\r\n      return fetch(`${this._likesUrl}/${cardId}`, {\r\n        method: isNotLiked ? \"PUT\" : \"DELETE\",\r\n        headers: {\r\n          authorization: this._token,\r\n        }\r\n      })\r\n      .then(this._checkResponse)\r\n  }\r\n\r\n}\r\n\r\nconst api = new Api({\r\n  url:'https://mesto.nomoreparties.co/v1/cohort-20',\r\n  headers:\"424dcfe6-7281-4ce4-8ed0-0018c46e204a\"\r\n})\r\n\r\nexport default api","import \"../pages/index.css\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport Footer from \"./Footer\";\nimport ConfirmDeletePopup from \"./ConfirmDeletePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport EditProfilePopup from \"./EditProfilePopup\"\nimport AddPlacePopup from \"./AddPlacePopup\"\nimport ImagePopup from \"./ImagePopup\";\nimport { useState, useEffect } from \"react\";\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport { CardContext } from \"../contexts/CardContext\";\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState({});\n  const [currentCards, setCurrentCards] = useState([]);\n  const [isEditProfilePopupOpen, setEditProfilePopupOpen] = useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupOpen] = useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupOpen] = useState(false);\n  const [isConfirmDeletePopupOpen, setConfirmDeletePopupOpen] = useState({isOpen: false, card: {}});\n  const [selectedCard, setSelectedCard] = useState({\n    isOpen: false,\n    element: {},\n  });\n\n  useEffect(() => {\n    api\n      .getUserData()\n      .then((data) => {\n        setCurrentUser(data);\n        console.log(data);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n\n  useEffect(() => {\n    api\n      .getInitialCards()\n      .then((data) => {\n        setCurrentCards(data);\n      })\n      .catch((err) => console.log(err));\n  }, []);\n  \n  const handleCardLike = card => {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked).then(newCard => {\n      setCurrentCards(state => state.map(c => (c._id === card._id ? newCard : c)));\n    });\n  }\n  const handleCardDelete = card => {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCurrentCards(state => state.filter(c => c._id !== card._id))\n      })\n      closeAllPopups()\n  }\n\n  const changeStateEditProfile = () => {\n    setEditProfilePopupOpen(true);\n  };\n\n  const changeStateAddPlace = () => {\n    setAddPlacePopupOpen(true);\n  };\n\n  const changeStateAvatarProfile = () => {\n    setEditAvatarPopupOpen(true);\n  };\n\n  const changeStateConfirmeDelete = (card) => {\n    setConfirmDeletePopupOpen({...isConfirmDeletePopupOpen, isOpen: true, card: card});\n  };\n\n  const handleCardClick = (card) => {\n    setSelectedCard({ isOpen: true, element: card });\n  };\n\n  const closeAllPopups = () => {\n    setEditProfilePopupOpen(false);\n    setAddPlacePopupOpen(false);\n    setEditAvatarPopupOpen(false);\n    setConfirmDeletePopupOpen({...isConfirmDeletePopupOpen, isOpen: false})\n    setSelectedCard({ ...selectedCard, isOpen: false });\n  };\n\n  const handleUpdateUser = data => {\n    api.saveUserChanges(data)\n      .then(data => setCurrentUser(data))\n      closeAllPopups()\n  }\n\n  const handleUpdateAvatar = avatar => {\n    console.log(avatar)\n    api.changedAvatar(avatar)\n      .then(data => setCurrentUser({ ...currentUser, avatar: data.avatar}))\n      closeAllPopups()\n  }\n\n  const handleAddPlaceSubmit = data => {\n    console.log(data)\n    api.postNewCard(data)\n      .then(newCard => setCurrentCards([newCard, ...currentCards]))\n      closeAllPopups()\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <CardContext.Provider value={currentCards}>\n        <div className=\"App\">\n          <div className=\"page\">\n            <Header />\n            <Main\n              onEditProfile={changeStateEditProfile}\n              onAddPlace={changeStateAddPlace}\n              onEditAvatar={changeStateAvatarProfile}\n              onConfirmeDelete={changeStateConfirmeDelete}\n              onCardClick={handleCardClick}\n              handleCardLike={handleCardLike}\n              handleCardDelete={handleCardDelete}\n            />\n            <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n            <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n            <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit}/>\n            <ConfirmDeletePopup isOpen={isConfirmDeletePopupOpen} onClose={closeAllPopups} onCardDelete={handleCardDelete}/>\n            \n\n            <ImagePopup onClose={closeAllPopups} card={selectedCard} />\n            <Footer />\n          </div>\n        </div>\n      </CardContext.Provider>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\n\nReactDOM.render(\n  <>\n    <App />\n  </>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}